openapi: 3.0.2
info:
  description: "This is a sample server Petstore server.  You can find out more about     Swagger at [http://swagger.io](http://swagger.io) or on [irc.freenode.net, #swagger](http://swagger.io/irc/).      For this sample, you can use the api key `special-key` to test the authorization     filters."
  version: "1.0.0"
  title: backlog api
paths:
  /OAuth2AccessRequest.action :
    get:
      summary: 認可リクエスト
      parameters:
        - in: query
          name: response_type
          required: true
          schema:
            type: string
            example: "code"
            enum:
              - "code"
        - in: query
          name: client_id
          required: true
          schema:
            type: string
            example: "fvdfbsfgbsdf"
        - in: query
          name: redirect_uri
          required: false
          schema:
            type: string
            example: "https://backlog-gantt-develop.netlify.app/"
        - in: query
          name: state
          required: false
          schema:
            type: string
            example: "code"
      responses:
        "200":
          description: 成功

  /api/v2/oauth2/token:
    post:
      summary: アクセストークンリクエスト
      requestBody:
        required: true
        content:
          application/x-www-form-urlencoded:
            schema:
              oneOf:
                - $ref: "#/components/schemas/Oauth2TokenRequest"
                - $ref: "#/components/schemas/Oauth2TokenRefleshRequest"
      responses:
        "200":
          description: 成功
          content:
            application/json:
              schema:
                title: Oauth2TokenRequestResponse
                type: object
                properties:
                  access_token:
                    type: string
                    example: "YOUR_ACCESS_TOKEN"
                  token_type:
                    type: string
                    example: Bearer
                  expires_in:
                    type: number
                    example: 3600
                  refresh_token:
                    type: string
                    example: YOUR_REFRESH_TOKEN



  /api/v2/projects:
    get:
      summary: プロジェクトの一覧を取得
      parameters:
        - in: query
          name: archived
          required: false
          schema:
            type: string
            example: "true"
      responses:
        "200":
          description: 成功
          content:
            application/json:
              schema:
                $ref : '#/components/schemas/ProjectListResponse'



components:
  schemas:
    ProjectListResponse:
      default: []
      description: The root schema comprises the entire JSON document.
      example:
      -   -   archived: false
              chartEnabled: false
              id: 1
              name: test
              projectKey: TEST
              projectLeaderCanEditProjectLeader: false
              subtaskingEnabled: false
              textFormattingRule: markdown
      items:
          anyOf:
          -   additionalProperties: true
              default: {}
              description: An explanation about the purpose of this instance.
              example:
              -   archived: false
                  chartEnabled: false
                  id: 1
                  name: test
                  projectKey: TEST
                  projectLeaderCanEditProjectLeader: false
                  subtaskingEnabled: false
                  textFormattingRule: markdown
              properties:
                  archived:
                      default: false
                      description: An explanation about the purpose of this instance.
                      example:
                      - false
                      title: The archived schema
                      type: boolean
                  chartEnabled:
                      default: false
                      description: An explanation about the purpose of this instance.
                      example:
                      - false
                      title: The chartEnabled schema
                      type: boolean
                  id:
                      default: 0
                      description: An explanation about the purpose of this instance.
                      example:
                      - 1
                      title: The id schema
                      type: integer
                  name:
                      default: ''
                      description: An explanation about the purpose of this instance.
                      example:
                      - test
                      title: The name schema
                      type: string
                  projectKey:
                      default: ''
                      description: An explanation about the purpose of this instance.
                      example:
                      - TEST
                      title: The projectKey schema
                      type: string
                  projectLeaderCanEditProjectLeader:
                      default: false
                      description: An explanation about the purpose of this instance.
                      example:
                      - false
                      title: The projectLeaderCanEditProjectLeader schema
                      type: boolean
                  subtaskingEnabled:
                      default: false
                      description: An explanation about the purpose of this instance.
                      example:
                      - false
                      title: The subtaskingEnabled schema
                      type: boolean
                  textFormattingRule:
                      default: ''
                      description: An explanation about the purpose of this instance.
                      example:
                      - markdown
                      title: The textFormattingRule schema
                      type: string
              required:
              - id
              - projectKey
              - name
              - chartEnabled
              - subtaskingEnabled
              - projectLeaderCanEditProjectLeader
              - textFormattingRule
              - archived
              title: The first anyOf schema
              type: object
      title: The root schema
      type: array

    Oauth2TokenRequest:
      type: object
      properties:
        grant_type:
          type: string
          enum:
            - authorization_code
          example: authorization_code
          description: 値は”authorization_code”で固定
        code:
          type: string
          description: 認可エンドポイントのリダイレクトから取得した認可コード 開発アプリケーション ページで設定したものと同じUri
        redirect_uri:
          type: string
          description: 認可エンドポイントで指定した場合は必須
        client_id:
          type: string
        client_secret:
          type: string
      required:
          - grant_type
          - code
          - client_id
          - client_secret

    Oauth2TokenRefleshRequest:
      type: object
      properties:
        grant_type:
          type: string
          enum:
            - refresh_token
          example: refresh_token
          description: 値は”refresh_token”で固定
        refresh_token :
          type: string
        client_id:
          type: string
        client_secret:
          type: string
      required:
          - grant_type
          - refresh_token
          - client_id
          - client_secret
